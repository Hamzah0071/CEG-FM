<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide Base de Donn√©es - CEG FM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .nav {
            display: flex;
            gap: 12px;
            padding: 25px;
            background: #f8f9fa;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: #5568d3;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .nav-btn.active {
            background: #764ba2;
            transform: translateY(-3px);
        }

        .content {
            padding: 40px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid #f0f0f0;
        }

        .card h2 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card h3 {
            color: #764ba2;
            margin: 25px 0 15px;
            font-size: 1.4rem;
        }

        .table-schema {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .table-schema h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .field {
            display: grid;
            grid-template-columns: 220px 160px 1fr;
            gap: 20px;
            padding: 12px 0;
            border-bottom: 1px dashed #ddd;
            align-items: center;
        }

        .field:last-child {
            border-bottom: none;
        }

        .field-name {
            font-weight: 700;
            color: #667eea;
        }

        .field-type {
            color: #764ba2;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .field-desc {
            color: #555;
            font-size: 0.95rem;
        }

        .example-code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 25px;
            border-radius: 12px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.7;
        }

        .example-code .keyword { color: #ff79c6; font-weight: bold; }
        .example-code .string { color: #50fa7b; }
        .example-code .comment { color: #6272a4; }
        .example-code .function { color: #8be9fd; }

        .relationship {
            display: flex;
            align-items: center;
            gap: 25px;
            margin: 25px 0;
            padding: 20px;
            background: #f0f7ff;
            border-radius: 12px;
            flex-wrap: wrap;
        }

        .table-box {
            background: white;
            padding: 18px 30px;
            border: 3px solid #667eea;
            border-radius: 12px;
            font-weight: 700;
            color: #667eea;
            text-align: center;
            min-width: 180px;
        }

        .arrow {
            font-size: 28px;
            color: #764ba2;
            font-weight: bold;
        }

        .tip, .warning, .success {
            padding: 18px;
            margin: 20px 0;
            border-radius: 10px;
            border-left-width: 5px;
            border-left-style: solid;
        }

        .tip {
            background: #fffbeb;
            border-left-color: #ffc107;
        }

        .warning {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .success {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .tip strong, .warning strong, .success strong {
            color: inherit;
        }

        .flow-diagram {
            display: flex;
            flex-direction: column;
            gap: 18px;
            margin: 25px 0;
        }

        .flow-step {
            display: flex;
            gap: 18px;
            align-items: center;
        }

        .step-number {
            background: #667eea;
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .quick-ref {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .quick-ref-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            transition: transform 0.3s;
        }

        .quick-ref-card:hover {
            transform: translateY(-8px);
        }

        .quick-ref-card h3 {
            margin-bottom: 12px;
            font-size: 1.4rem;
        }

        @media (max-width: 768px) {
            .field {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .relationship {
                flex-direction: column;
                text-align: center;
            }

            .nav {
                flex-direction: column;
                align-items: center;
            }

            .nav-btn {
                width: 90%;
            }

            .header h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìö Guide Complet de la Base de Donn√©es CEG FM</h1>
            <p>Comprendre toute la structure sans avoir besoin d'une IA</p>
        </div>

        <div class="nav">
            <button class="nav-btn active" onclick="showSection('intro')">üìñ Introduction</button>
            <button class="nav-btn" onclick="showSection('structure')">üèóÔ∏è Structure des Tables</button>
            <button class="nav-btn" onclick="showSection('relations')">üîó Relations</button>
            <button class="nav-btn" onclick="showSection('exemples')">üíª Exemples SQL</button>
            <button class="nav-btn" onclick="showSection('php')">üêò Exemples PHP</button>
            <button class="nav-btn" onclick="showSection('scenarios')">üéØ Sc√©narios Pratiques</button>
        </div>

        <div class="content">

            <!-- SECTION INTRODUCTION -->
            <div id="intro" class="section active">
                <div class="card">
                    <h2>üéì Bienvenue dans la Base de Donn√©es du CEG FM</h2>
                    <p>Cette base de donn√©es g√®re l'ensemble du syst√®me scolaire : √©l√®ves, professeurs, classes, notes, inscriptions, etc.</p>

                    <div class="quick-ref">
                        <div class="quick-ref-card">
                            <h3>üë• Personnes</h3>
                            <p>Identit√© commune √† tous (nom, pr√©nom, date de naissance, t√©l√©phone...)</p>
                        </div>
                        <div class="quick-ref-card">
                            <h3>üîê Utilisateurs</h3>
                            <p>Comptes de connexion (email, mot de passe, r√¥le : admin, prof, √©l√®ve...)</p>
                        </div>
                        <div class="quick-ref-card">
                            <h3>üìÖ Ann√©e Scolaire</h3>
                            <p>P√©riode active unique pour organiser les classes et inscriptions</p>
                        </div>
                        <div class="quick-ref-card">
                            <h3>üéí √âl√®ves & Professeurs</h3>
                            <p>Informations sp√©cifiques selon le r√¥le</p>
                        </div>
                    </div>

                    <h3>üîë Principe Fondamental : S√©paration Intelligente</h3>
                    <div class="tip">
                        <strong>üí° Pourquoi tout est s√©par√© ?</strong>
                        <ol style="margin-left: 25px; margin-top: 12px; line-height: 1.8;">
                            <li><strong>personnes</strong> ‚Üí identit√© physique (ne change presque jamais)</li>
                            <li><strong>utilisateurs</strong> ‚Üí compte de connexion (email/mot de passe peuvent changer)</li>
                            <li><strong>eleves</strong> ou <strong>professeurs</strong> ‚Üí r√¥le et infos sp√©cifiques</li>
                        </ol>
                    </div>

                    <h3>Exemple concret : Jean Dupont, professeur</h3>
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">Table <strong>personnes</strong> : nom, pr√©nom, date de naissance, t√©l√©phone...</div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">Table <strong>utilisateurs</strong> : email, r√¥le = "prof", statut = "actif"</div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">Table <strong>professeurs</strong> : matricule PROF2024001, sp√©cialit√© Math√©matiques</div>
                        </div>
                    </div>

                    <div class="success">
                        <strong>‚úÖ Avantage majeur :</strong> Si Jean change d'email ou de num√©ro, on ne touche qu'√† une seule table. Tout reste coh√©rent !
                    </div>
                </div>
            </div>

            <!-- SECTION STRUCTURE -->
            <div id="structure" class="section">
                <div class="card">
                    <h2>üèóÔ∏è Structure D√©taill√©e des Tables</h2>

                    <div class="table-schema">
                        <h4>1. personnes</h4>
                        <p>Contient les informations d'identit√© de toute personne dans le syst√®me.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire auto-incr√©ment√©e</span></div>
                        <div class="field"><span class="field-name">nom</span><span class="field-type">VARCHAR(50)</span><span class="field-desc">Nom en majuscules</span></div>
                        <div class="field"><span class="field-name">prenom</span><span class="field-type">VARCHAR(100)</span><span class="field-desc">Pr√©nom(s)</span></div>
                        <div class="field"><span class="field-name">date_naissance</span><span class="field-type">DATE</span><span class="field-desc">Format YYYY-MM-DD</span></div>
                        <div class="field"><span class="field-name">sexe</span><span class="field-type">ENUM('M','F')</span><span class="field-desc">Masculin ou F√©minin</span></div>
                        <div class="field"><span class="field-name">telephone</span><span class="field-type">VARCHAR(15)</span><span class="field-desc">Num√©ro principal</span></div>
                        <div class="field"><span class="field-name">adresse</span><span class="field-type">TEXT</span><span class="field-desc">Adresse compl√®te</span></div>
                    </div>

                    <div class="table-schema">
                        <h4>2. utilisateurs</h4>
                        <p>G√®re les comptes de connexion.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">personne_id</span><span class="field-type">INT FK</span><span class="field-desc">Lien vers personnes.id</span></div>
                        <div class="field"><span class="field-name">email</span><span class="field-type">VARCHAR(150) UNIQUE</span><span class="field-desc">Email de connexion</span></div>
                        <div class="field"><span class="field-name">password_hash</span><span class="field-type">VARCHAR(255)</span><span class="field-desc">Mot de passe hash√©</span></div>
                        <div class="field"><span class="field-name">role</span><span class="field-type">ENUM('admin','prof','eleve','parent')</span><span class="field-desc">R√¥le dans le syst√®me</span></div>
                        <div class="field"><span class="field-name">statut</span><span class="field-type">ENUM('en_attente','actif','refuse','suspendu')</span><span class="field-desc">√âtat du compte</span></div>
                    </div>

                    <div class="table-schema">
                        <h4>3. eleves</h4>
                        <p>Informations sp√©cifiques aux √©l√®ves.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">utilisateur_id</span><span class="field-type">INT FK</span><span class="field-desc">Lien vers utilisateurs.id</span></div>
                        <div class="field"><span class="field-name">personne_id</span><span class="field-type">INT FK</span><span class="field-desc">Lien vers personnes.id</span></div>
                        <div class="field"><span class="field-name">matricule</span><span class="field-type">VARCHAR(20) UNIQUE</span><span class="field-desc">Ex: ELEV2024001</span></div>
                        <div class="field"><span class="field-name">nom_parent</span><span class="field-type">VARCHAR(100)</span><span class="field-desc">Nom du tuteur</span></div>
                        <div class="field"><span class="field-name">telephone_parent</span><span class="field-type">VARCHAR(15)</span><span class="field-desc">Contact d'urgence</span></div>
                    </div>

                    <div class="table-schema">
                        <h4>4. professeurs</h4>
                        <p>Informations sp√©cifiques aux professeurs.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">utilisateur_id</span><span class="field-type">INT FK</span><span class="field-desc">Lien vers utilisateurs.id</span></div>
                        <div class="field"><span class="field-name">personne_id</span><span class="field-type">INT FK</span><span class="field-desc">Lien vers personnes.id</span></div>
                        <div class="field"><span class="field-name">matricule</span><span class="field-type">VARCHAR(20) UNIQUE</span><span class="field-desc">Ex: PROF2024001</span></div>
                        <div class="field"><span class="field-name">specialite</span><span class="field-type">VARCHAR(50)</span><span class="field-desc">Mati√®re principale</span></div>
                        <div class="field"><span class="field-name">date_recrutement</span><span class="field-type">DATE</span><span class="field-desc">Date d'embauche</span></div>
                    </div>

                    <div class="table-schema">
                        <h4>5. annee_scolaire</h4>
                        <p>D√©finit les ann√©es scolaires.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">debut</span><span class="field-type">YEAR</span><span class="field-desc">Ex: 2024</span></div>
                        <div class="field"><span class="field-name">fin</span><span class="field-type">YEAR</span><span class="field-desc">Ex: 2025</span></div>
                        <div class="field"><span class="field-name">actif</span><span class="field-type">BOOLEAN</span><span class="field-desc">1 = ann√©e en cours</span></div>
                        <div class="warning">
                            <strong>‚ö†Ô∏è Important :</strong> Une seule ann√©e doit avoir actif = 1 √† la fois.
                        </div>
                    </div>

                    <div class="table-schema">
                        <h4>6. classes</h4>
                        <p>Les classes existantes par ann√©e.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">niveau</span><span class="field-type">VARCHAR(10)</span><span class="field-desc">6√®me, 5√®me, etc.</span></div>
                        <div class="field"><span class="field-name">nom</span><span class="field-type">VARCHAR(10)</span><span class="field-desc">A, B, C...</span></div>
                        <div class="field"><span class="field-name">annee_scolaire_id</span><span class="field-type">INT FK</span><span class="field-desc">Lien vers l'ann√©e</span></div>
                    </div>

                    <div class="table-schema">
                        <h4>7. inscriptions</h4>
                        <p>Historique des inscriptions des √©l√®ves.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">eleve_id</span><span class="field-type">INT FK</span><span class="field-desc">Quel √©l√®ve</span></div>
                        <div class="field"><span class="field-name">classe_id</span><span class="field-type">INT FK</span><span class="field-desc">Dans quelle classe</span></div>
                        <div class="tip">
                            <strong>üí° Pourquoi s√©par√©e ?</strong> Permet de garder l'historique des passages en classe.
                        </div>
                    </div>

                    <div class="table-schema">
                        <h4>8. matieres</h4>
                        <p>Liste des mati√®res enseign√©es.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">nom</span><span class="field-type">VARCHAR(50)</span><span class="field-desc">Math√©matiques, Fran√ßais, etc.</span></div>
                    </div>

                    <div class="table-schema">
                        <h4>9. affectations_prof</h4>
                        <p>Qui enseigne quoi et o√π.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">professeur_id</span><span class="field-type">INT FK</span><span class="field-desc">Le professeur</span></div>
                        <div class="field"><span class="field-name">classe_id</span><span class="field-type">INT FK</span><span class="field-desc">La classe</span></div>
                        <div class="field"><span class="field-name">matiere_id</span><span class="field-type">INT FK</span><span class="field-desc">La mati√®re</span></div>
                    </div>

                    <div class="table-schema">
                        <h4>10. notes</h4>
                        <p>Toutes les notes saisies.</p>
                        <div class="field"><span class="field-name">id</span><span class="field-type">INT PK</span><span class="field-desc">Cl√© primaire</span></div>
                        <div class="field"><span class="field-name">inscription_id</span><span class="field-type">INT FK</span><span class="field-desc">√âl√®ve dans sa classe/ann√©e</span></div>
                        <div class="field"><span class="field-name">affectation_id</span><span class="field-type">INT FK</span><span class="field-desc">Cours (prof + mati√®re + classe)</span></div>
                        <div class="field"><span class="field-name">valeur</span><span class="field-type">DECIMAL(4,2)</span><span class="field-desc">Note obtenue (ex: 15.75)</span></div>
                        <div class="field"><span class="field-name">sur_combien</span><span class="field-type">DECIMAL(4,2)</span><span class="field-desc">Sur 20 par d√©faut</span></div>
                        <div class="field"><span class="field-name">date_saisie</span><span class="field-type">DATE</span><span class="field-desc">Quand la note a √©t√© entr√©e</span></div>
                    </div>
                </div>
            </div>

            <!-- SECTION RELATIONS -->
            <div id="relations" class="section">
                <div class="card">
                    <h2>üîó Les Relations entre les Tables</h2>

                    <h3>1. Personne ‚Üí Compte ‚Üí R√¥le sp√©cifique</h3>
                    <div class="relationship">
                        <div class="table-box">personnes<br><small>id = 5</small></div>
                        <div class="arrow">‚Üí</div>
                        <div class="table-box">utilisateurs<br><small>personne_id = 5</small></div>
                        <div class="arrow">‚Üí</div>
                        <div class="table-box">eleves ou professeurs<br><small>utilisateur_id = X</small></div>
                    </div>

                    <h3>2. Inscription d'un √©l√®ve dans une classe</h3>
                    <div class="relationship">
                        <div class="table-box">eleves<br><small>id = 12</small></div>
                        <div class="arrow">‚Üí</div>
                        <div class="table-box">inscriptions<br><small>eleve_id = 12<br>classe_id = 8</small></div>
                        <div class="arrow">‚Üí</div>
                        <div class="table-box">classes<br><small>6√®me A</small></div>
                    </div>

                    <h3>3. Affectation d'un professeur</h3>
                    <div class="relationship">
                        <div class="table-box">professeurs<br><small>id = 3</small></div>
                        <div class="arrow">‚Üí</div>
                        <div class="table-box">affectations_prof<br><small>prof_id = 3<br>matiere + classe</small></div>
                        <div class="arrow">‚Üí</div>
                        <div class="table-box">Cours complet</div>
                    </div>

                    <h3>4. Parcours complet d'une note</h3>
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">√âl√®ve dans une classe cette ann√©e ‚Üí <strong>inscriptions</strong></div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">Prof enseigne une mati√®re dans cette classe ‚Üí <strong>affectations_prof</strong></div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">Note li√©e √† l'inscription et √† l'affectation ‚Üí <strong>notes</strong></div>
                        </div>
                    </div>

                    <div class="tip">
                        <strong>üí° R√®gle simple :</strong> Tout champ finissant par <code>_id</code> est une cl√© √©trang√®re vers une autre table !
                    </div>
                </div>
            </div>

            <!-- SECTION EXEMPLES SQL -->
            <div id="exemples" class="section">
                <div class="card">
                    <h2>üíª Exemples SQL Utiles</h2>

                    <h3>1. Liste compl√®te des √©l√®ves actuels</h3>
                    <div class="example-code"><span class="keyword">SELECT</span>
    p.nom, p.prenom, e.matricule, CONCAT(c.niveau, ' ', c.nom) <span class="keyword">AS</span> classe
<span class="keyword">FROM</span> eleves e
<span class="keyword">JOIN</span> personnes p <span class="keyword">ON</span> e.personne_id = p.id
<span class="keyword">JOIN</span> inscriptions i <span class="keyword">ON</span> i.eleve_id = e.id
<span class="keyword">JOIN</span> classes c <span class="keyword">ON</span> i.classe_id = c.id
<span class="keyword">JOIN</span> annee_scolaire a <span class="keyword">ON</span> c.annee_scolaire_id = a.id
<span class="keyword">WHERE</span> a.actif = 1
<span class="keyword">ORDER BY</span> p.nom, p.prenom;</div>

                    <h3>2. Notes d'un √©l√®ve (par ID)</h3>
                    <div class="example-code"><span class="keyword">SELECT</span>
    m.nom <span class="keyword">AS</span> matiere,
    CONCAT(p_prof.nom, ' ', p_prof.prenom) <span class="keyword">AS</span> professeur,
    n.valeur, n.sur_combien
<span class="keyword">FROM</span> notes n
<span class="keyword">JOIN</span> inscriptions i <span class="keyword">ON</span> n.inscription_id = i.id
<span class="keyword">JOIN</span> affectations_prof ap <span class="keyword">ON</span> n.affectation_id = ap.id
<span class="keyword">JOIN</span> matieres m <span class="keyword">ON</span> ap.matiere_id = m.id
<span class="keyword">JOIN</span> professeurs prof <span class="keyword">ON</span> ap.professeur_id = prof.id
<span class="keyword">JOIN</span> personnes p_prof <span class="keyword">ON</span> prof.personne_id = p_prof.id
<span class="keyword">WHERE</span> i.eleve_id = 15;</div>

                    <h3>3. Moyenne g√©n√©rale par √©l√®ve (ann√©e active)</h3>
                    <div class="example-code"><span class="keyword">SELECT</span>
    p.nom, p.prenom,
    ROUND(AVG(n.valeur), 2) <span class="keyword">AS</span> moyenne_generale
<span class="keyword">FROM</span> notes n
<span class="keyword">JOIN</span> inscriptions i <span class="keyword">ON</span> n.inscription_id = i.id
<span class="keyword">JOIN</span> eleves e <span class="keyword">ON</span> i.eleve_id = e.id
<span class="keyword">JOIN</span> personnes p <span class="keyword">ON</span> e.personne_id = p.id
<span class="keyword">JOIN</span> classes c <span class="keyword">ON</span> i.classe_id = c.id
<span class="keyword">JOIN</span> annee_scolaire a <span class="keyword">ON</span> c.annee_scolaire_id = a.id
<span class="keyword">WHERE</span> a.actif = 1
<span class="keyword">GROUP BY</span> e.id
<span class="keyword">ORDER BY</span> moyenne_generale <span class="keyword">DESC</span>;</div>
                </div>
            </div>

            <!-- SECTION PHP -->
            <div id="php" class="section">
                <div class="card">
                    <h2>üêò Exemples PHP avec PDO</h2>

                    <h3>Connexion s√©curis√©e</h3>
                    <div class="example-code"><span class="keyword">$dsn</span> = <span class="string">'mysql:host=localhost;dbname=ceg_fm;charset=utf8mb4'</span>;<br>
<span class="keyword">$options</span> = [<br>
&nbsp;&nbsp;PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,<br>
&nbsp;&nbsp;PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC<br>
];<br>
<span class="keyword">try</span> {<br>
&nbsp;&nbsp;<span class="keyword">$pdo</span> = <span class="keyword">new</span> PDO(<span class="keyword">$dsn</span>, <span class="string">'username'</span>, <span class="string">'password'</span>, <span class="keyword">$options</span>);<br>
} <span class="keyword">catch</span> (PDOException <span class="keyword">$e</span>) {<br>
&nbsp;&nbsp;<span class="keyword">die</span>(<span class="string">"Erreur de connexion : "</span> . <span class="keyword">$e</span>-&gt;getMessage());<br>
}</div>

                    <h3>Lire les √©l√®ves d'une classe</h3>
                    <div class="example-code"><span class="keyword">$sql</span> = <span class="string">"SELECT p.nom, p.prenom, e.matricule
FROM eleves e
JOIN personnes p ON e.personne_id = p.id
JOIN inscriptions i ON i.eleve_id = e.id
JOIN classes c ON i.classe_id = c.id
JOIN annee_scolaire a ON c.annee_scolaire_id = a.id
WHERE a.actif = 1 AND c.id = :classe_id"</span>;<br><br>
<span class="keyword">$stmt</span> = <span class="keyword">$pdo</span>-&gt;prepare(<span class="keyword">$sql</span>);<br>
<span class="keyword">$stmt</span>-&gt;execute(['classe_id' =&gt; 5]);<br>
<span class="keyword">$eleves</span> = <span class="keyword">$stmt</span>-&gt;fetchAll();</div>

                    <h3>Ajouter une note</h3>
                    <div class="example-code"><span class="keyword">$sql</span> = <span class="string">"INSERT INTO notes (inscription_id, affectation_id, valeur, sur_combien)
VALUES (:inscr, :affect, :note, :sur)"</span>;<br><br>
<span class="keyword">$stmt</span> = <span class="keyword">$pdo</span>-&gt;prepare(<span class="keyword">$sql</span>);<br>
<span class="keyword">$stmt</span>-&gt;execute([<br>
&nbsp;&nbsp;<span class="string">'inscr'</span> =&gt; 120,<br>
&nbsp;&nbsp;<span class="string">'affect'</span> =&gt; 35,<br>
&nbsp;&nbsp;<span class="string">'note'</span> =&gt; 17.5,<br>
&nbsp;&nbsp;<span class="string">'sur'</span> =&gt; 20<br>
]);</div>

                    <div class="warning">
                        <strong>‚ö†Ô∏è S√©curit√© :</strong> Toujours utiliser <code>prepare()</code> et <code>execute()</code> avec des param√®tres li√©s pour √©viter les injections SQL.
                    </div>
                </div>
            </div>

            <!-- SECTION SCENARIOS -->
            <div id="scenarios" class="section">
                <div class="card">
                    <h2>üéØ Sc√©narios Courants</h2>

                    <h3>Inscrire un nouvel √©l√®ve</h3>
                    <div class="flow-diagram">
                        <div class="flow-step">
                            <div class="step-number">1</div>
                            <div class="step-content">INSERT dans <strong>personnes</strong> ‚Üí r√©cup√©rer l‚Äôid</div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">2</div>
                            <div class="step-content">INSERT dans <strong>utilisateurs</strong> (email, hash, r√¥le = eleve)</div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">3</div>
                            <div class="step-content">INSERT dans <strong>eleves</strong> avec les deux ids et matricule</div>
                        </div>
                        <div class="flow-step">
                            <div class="step-number">4</div>
                            <div class="step-content">INSERT dans <strong>inscriptions</strong> avec classe_id de l‚Äôann√©e active</div>
                        </div>
                    </div>

                    <h3>Changer un √©l√®ve de classe l'ann√©e suivante</h3>
                    <div class="tip">
                        <strong>üí° Astuce :</strong> Il suffit d'ajouter une nouvelle ligne dans <strong>inscriptions</strong> avec la nouvelle classe. L‚Äôancienne reste pour l‚Äôhistorique.
                    </div>

                    <h3>Suppression douce (soft delete)</h3>
                    <div class="success">
                        <strong>‚úÖ Bonne pratique :</strong> Ajouter un champ <code>deleted_at TIMESTAMP NULL</code> et filtrer avec <code>WHERE deleted_at IS NULL</code> au lieu de DELETE.
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');

            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.querySelector(`.nav-btn[onclick="showSection('${id}')"]`).classList.add('active');
        }
    </script>
</body>
</html>